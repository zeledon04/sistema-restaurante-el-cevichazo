{% extends "../../base.html" %}
{% load static %}
{% comment %} {% load static %} {% endcomment %}
{% block title %}Listar Productos Inactivos{% endblock %}
{% block content %}
<div class="container mx-auto p-4 max-w-full rounded-md shadow-md">

    <div class='flex justify-between items-center mb-5'>

        {% comment %} <h1 class='text-3xl text-gray-600 font-bold'>Productos</h1> {% endcomment %}
        <div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Control de Productos Inactivos</h1>
            <p class="text-gray-600">Productos Inactivos Disponibles</p>
        </div>

        <input 
            type="text"
            id="filtroNombre"
            placeholder='Nombre'
            class='p-2 bg-gray-300 outline-none rounded-lg w-[18%]'
            oninput="filtrarProductos()"
        />

        <input 
            type="text"
            id="input-codigo"
            placeholder='Codigo'
            value=""
            class='p-2 bg-gray-300 outline-none rounded-lg w-[18%]'
        />

        

        <select id="filtroCategoria" class="p-2 bg-gray-300 outline-none rounded-lg w-[18%] text-gray-700" onchange="filtrarProductos()">
            <option value="">Filtrar por categoría</option>
            {% for categoria in categorias %}
            <option value="{{ categoria.categoriaid }}">{{ categoria.nombre }}</option>
            {% endfor %}
        </select>


    </div>

    <hr class=' border-gray-500/30' />

    <div class="rounded-tr-lg rounded-tl-lg overflow-y-auto flex-1 min-h-0">
    <table id="datos" class="w-full table-fixed border-collapse mb-5 rounded-lg">
        <thead class="sticky top-0 bg-gray-100 z-10 p-3 border border-t-0 border-l-0 border-r-0 border-b-gray-200">
            <tr class="">
                <th class="p-2 text-xl">#</th>
                <th class="p-2 text-xl">Producto</th>
                <th class="p-2 text-xl">Imagen</th>
                <th class="p-2 text-xl">Categoria</th>
                <th class="p-2 text-xl">Stock</th>
                <th class="p-2 text-xl">Precio</th>
                <th class="p-2 text-xl">Actions</th>
            </tr>
        </thead>
        <tbody class="p-2 rounded-lg w-full">
            {% for producto in productos %}
            <tr class="hover:bg-gray-200 rounded-lg transition-colors">
                <td class="p-3 text-xl text-center">{{ producto.cont }}</td>
                <td class="p-3 text-xl text-center">{{ producto.nombre }}</td>
                <td class="text-center"><img src="{% static 'productos/' %}{{ producto.rutafoto }}?v={{ producto.updated_at.timestamp }}" class="mx-auto block w-16 h-16"></td>
                <td class="p-3 text-xl text-center">{{ producto.categoriaid.nombre }}</td>
                <td class="p-3 text-xl text-center">{{ producto.stock }}</td>
                <td class="p-3 text-xl text-center">C$ {{ producto.precio|floatformat:2 }}</td>
                <td class="p-3 text-xl text-center">
                    <div class="grid grid-cols-2 gap-2 w-full">
                        <a href="#" onclick="activarProducto({{ producto.productoid }})" class="btn w-full" alt="Activar Producto">

                            <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-11 rounded-lg text-amber-300 hover:bg-gray-300 p-2 w-full">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                            </svg>
                        </a>

                    </div>
                </td>
            </tr>
            {% endfor %}           
        </tbody>
    </table>
    </div>

    <hr class=' border-gray-500/30'/>

    <div class="flex justify-center items-center mt-5">
        {% if productos.has_previous %}
            <a href="?page=1" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">&laquo; Primero</a>
            <a href="?page={{ productos.previous_page_number }}" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Anterior</a>
        {% endif %}

        <span class="px-3 py-1 bg-gray-100 rounded text-gray-700">Página {{ productos.number }} de {{ productos.paginator.num_pages }}</span>

        {% if productos.has_next %}
            <a href="?page={{ productos.next_page_number }}" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Siguiente</a>
            <a href="?page={{ productos.paginator.num_pages }}" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Último &raquo;</a>
        {% endif %}
    </div>


    <div class='flex justify-end gap-4 mx-10'>
        <a href="{% url 'listar_productos' %}" class='bg-red-500 text-white py-2 cursor-pointer px-4 rounded-lg hover:bg-red-600 transition-colors'>Cancelar</a>
    </div>

</div>
{% endblock content %}

{% block scripts %}
<script src="{% static "js/activar.js" %}"></script>
<script src="{% static "js/search.js" %}"></script>
{% endblock %}